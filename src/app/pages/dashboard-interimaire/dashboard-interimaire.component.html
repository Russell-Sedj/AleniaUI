<div class="flex min-h-screen bg-gray-50">
    <!-- Sidebar avec classe CSS personnalis√©e -->
    <aside class="sidebar-container w-72 bg-white text-gray-700 flex flex-col shadow-lg border-r border-gray-200">
        <div class="p-6 text-center border-b border-gray-100">
            <img src="/assets/images/logo.png" alt="ALENIA" class="w-12 h-12 mx-auto mb-3">
            <h3 class="text-lg font-semibold text-gray-800">Espace Int√©rimaire</h3>
        </div>

        <nav class="flex-1 py-5">
            <ul class="space-y-1">
                <li>
                    <a (click)="setActiveSection('profil')"
                        [class]="'flex items-center px-6 py-4 text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-all duration-300 cursor-pointer ' + (activeSection === 'profil' ? 'bg-blue-50 text-blue-600 border-r-3 border-blue-600 font-medium' : '')">
                        <span class="w-5 h-5 mr-4 text-lg">üë§</span>
                        <span>Mon Profil</span>
                    </a>
                </li>
                <li>
                    <a (click)="setActiveSection('missions')"
                        [class]="'flex items-center px-6 py-4 text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-all duration-300 cursor-pointer ' + (activeSection === 'missions' ? 'bg-blue-50 text-blue-600 border-r-3 border-blue-600 font-medium' : '')">
                        <span class="w-5 h-5 mr-4 text-lg">üíº</span>
                        <span>Mes Missions</span>
                    </a>
                </li>
                <li>
                    <a (click)="setActiveSection('planning')"
                        [class]="'flex items-center px-6 py-4 text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-all duration-300 cursor-pointer ' + (activeSection === 'planning' ? 'bg-blue-50 text-blue-600 border-r-3 border-blue-600 font-medium' : '')">
                        <span class="w-5 h-5 mr-4 text-lg">üìÖ</span>
                        <span>Planning</span>
                    </a>
                </li>
                <li>
                    <a (click)="setActiveSection('documents')"
                        [class]="'flex items-center px-6 py-4 text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-all duration-300 cursor-pointer ' + (activeSection === 'documents' ? 'bg-blue-50 text-blue-600 border-r-3 border-blue-600 font-medium' : '')">
                        <span class="w-5 h-5 mr-4 text-lg">üìÑ</span>
                        <span>Documents</span>
                    </a>
                </li>
                <li>
                    <a (click)="setActiveSection('messages')"
                        [class]="'flex items-center px-6 py-4 text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-all duration-300 cursor-pointer ' + (activeSection === 'messages' ? 'bg-blue-50 text-blue-600 border-r-3 border-blue-600 font-medium' : '')">
                        <span class="w-5 h-5 mr-4 text-lg">üí¨</span>
                        <span>Messages</span>
                    </a>
                </li>
                <li>
                    <a (click)="setActiveSection('parametres')"
                        [class]="'flex items-center px-6 py-4 text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-all duration-300 cursor-pointer ' + (activeSection === 'parametres' ? 'bg-blue-50 text-blue-600 border-r-3 border-blue-600 font-medium' : '')">
                        <span class="w-5 h-5 mr-4 text-lg">‚öôÔ∏è</span>
                        <span>Param√®tres</span>
                    </a>
                </li>
            </ul>
        </nav>

        <div class="p-5 border-t border-gray-100">
            <button (click)="logout()"
                class="flex items-center w-full p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-300">
                <span class="w-5 h-5 mr-4 text-lg">üö™</span>
                D√©connexion
            </button>
        </div>
    </aside>

    <!-- Contenu principal -->
    <main class="flex-1 flex flex-col min-h-screen overflow-hidden">
        <header class="bg-white p-6 border-b border-gray-200 flex justify-between items-center shadow-sm">
            <h1
                class="text-3xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] leading-normal">
                {{ getSectionTitle() }}</h1>
            <div class="flex items-center space-x-4">
                <img src="/assets/images/avatar-default.png" alt="Avatar"
                    class="w-10 h-10 rounded-full border-2 border-transparent bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] p-0.5">
                <span class="text-gray-700">Bonjour, {{ userProfile.prenom }} {{ userProfile.nom }}</span>
            </div>
        </header>

        <div class="flex-1 p-8 overflow-y-auto">
            <!-- Section Profil -->
            <div *ngIf="activeSection === 'profil'" class="max-w-4xl">
                <div class="bg-white rounded-xl p-8 shadow-lg">
                    <h2
                        class="text-2xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] mb-8">
                        Informations personnelles</h2>

                    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="space-y-2">
                                <label for="prenom" class="block text-sm font-medium text-gray-700">Pr√©nom</label>
                                <input type="text" id="prenom" formControlName="prenom"
                                    [class]="'w-full px-4 py-3 border-2 rounded-lg transition-colors duration-300 ' + (!isEditing ? 'bg-gray-50 border-gray-200' : 'bg-white border-gray-300 focus:border-blue-500 focus:outline-none')">
                            </div>
                            <div class="space-y-2">
                                <label for="nom" class="block text-sm font-medium text-gray-700">Nom</label>
                                <input type="text" id="nom" formControlName="nom"
                                    [class]="'w-full px-4 py-3 border-2 rounded-lg transition-colors duration-300 ' + (!isEditing ? 'bg-gray-50 border-gray-200' : 'bg-white border-gray-300 focus:border-blue-500 focus:outline-none')">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="space-y-2">
                                <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" id="email" formControlName="email"
                                    [class]="'w-full px-4 py-3 border-2 rounded-lg transition-colors duration-300 ' + (!isEditing ? 'bg-gray-50 border-gray-200' : 'bg-white border-gray-300 focus:border-blue-500 focus:outline-none')">
                            </div>
                            <div class="space-y-2">
                                <label for="telephone" class="block text-sm font-medium text-gray-700">T√©l√©phone</label>
                                <input type="tel" id="telephone" formControlName="telephone"
                                    [class]="'w-full px-4 py-3 border-2 rounded-lg transition-colors duration-300 ' + (!isEditing ? 'bg-gray-50 border-gray-200' : 'bg-white border-gray-300 focus:border-blue-500 focus:outline-none')">
                            </div>
                        </div>

                        <div class="mb-6">
                            <label for="specialite"
                                class="block text-sm font-medium text-gray-700 mb-2">Sp√©cialit√©</label>
                            <select id="specialite" formControlName="specialite"
                                [class]="'w-full px-4 py-3 border-2 rounded-lg transition-colors duration-300 ' + (!isEditing ? 'bg-gray-50 border-gray-200' : 'bg-white border-gray-300 focus:border-blue-500 focus:outline-none')">
                                <option value="">S√©lectionner une sp√©cialit√©</option>
                                <option value="infirmier">Infirmier(√®re)</option>
                                <option value="aide-soignant">Aide-soignant(e)</option>
                                <option value="medecin">M√©decin</option>
                                <option value="kinesitherapeute">Kin√©sith√©rapeute</option>
                            </select>
                        </div>

                        <div class="mb-8">
                            <label for="experience" class="block text-sm font-medium text-gray-700 mb-2">Ann√©es
                                d'exp√©rience</label>
                            <input type="number" id="experience" formControlName="experience"
                                [class]="'w-full px-4 py-3 border-2 rounded-lg transition-colors duration-300 ' + (!isEditing ? 'bg-gray-50 border-gray-200' : 'bg-white border-gray-300 focus:border-blue-500 focus:outline-none')">
                        </div>

                        <div class="flex space-x-4">
                            <button type="button" *ngIf="!isEditing" (click)="toggleEdit()"
                                class="px-6 py-3 bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] text-white rounded-lg hover:from-[#5A94E8] hover:to-[#FF5555] transform hover:-translate-y-1 transition-all duration-300 font-medium">
                                Modifier le profil
                            </button>
                            <div *ngIf="isEditing" class="flex space-x-4">
                                <button type="submit"
                                    class="px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transform hover:-translate-y-1 transition-all duration-300 font-medium">
                                    Sauvegarder
                                </button>
                                <button type="button" (click)="cancelEdit()"
                                    class="px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transform hover:-translate-y-1 transition-all duration-300 font-medium">
                                    Annuler
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Section Missions -->
            <div *ngIf="activeSection === 'missions'" class="space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <h3
                            class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] mb-2">
                            5</h3>
                        <p class="text-gray-600">Missions en cours</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <h3
                            class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] mb-2">
                            23</h3>
                        <p class="text-gray-600">Missions termin√©es</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <h3
                            class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] mb-2">
                            4.8/5</h3>
                        <p class="text-gray-600">Note moyenne</p>
                    </div>
                </div>                <div class="bg-white rounded-xl p-8 shadow-lg">
                    <h3
                        class="text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] mb-6">
                        Navigation Missions</h3>
                    
                    <!-- 3 cartes de navigation vers les missions -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Missions disponibles -->
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-blue-200">
                            <a routerLink="/missions" class="block text-center">
                                <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center">
                                    <span class="text-2xl text-white">üîç</span>
                                </div>
                                <h4 class="text-lg font-bold text-blue-800 mb-2">Missions disponibles</h4>
                                <p class="text-blue-600 text-sm">D√©couvrez toutes les missions pr√®s de chez vous</p>
                            </a>
                        </div>
                        
                        <!-- Missions √† venir -->
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-green-200">
                            <a routerLink="/missions-venir" class="block text-center">
                                <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center">
                                    <span class="text-2xl text-white">üìÖ</span>
                                </div>
                                <h4 class="text-lg font-bold text-green-800 mb-2">Missions √† venir</h4>
                                <p class="text-green-600 text-sm">Consultez vos prochaines missions confirm√©es</p>
                            </a>
                        </div>
                        
                        <!-- Missions pass√©es -->
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-purple-200">
                            <a routerLink="/missions-passes" class="block text-center">
                                <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center">
                                    <span class="text-2xl text-white">üìã</span>
                                </div>
                                <h4 class="text-lg font-bold text-purple-800 mb-2">Missions pass√©es</h4>
                                <p class="text-purple-600 text-sm">Consultez l'historique de vos missions</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section Planning -->
            <div *ngIf="activeSection === 'planning'" class="space-y-6">
                <!-- Header avec vue et navigation -->
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <div class="flex bg-white rounded-lg shadow-sm border">
                            <button (click)="setCalendarView('day')"
                                [class]="'px-4 py-2 text-sm font-medium transition-colors ' + (calendarView === 'day' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-50')">
                                Jour
                            </button>
                            <button (click)="setCalendarView('week')"
                                [class]="'px-4 py-2 text-sm font-medium transition-colors ' + (calendarView === 'week' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-50')">
                                Semaine
                            </button>
                            <button (click)="setCalendarView('month')"
                                [class]="'px-4 py-2 text-sm font-medium transition-colors ' + (calendarView === 'month' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-50')">
                                Mois
                            </button>
                        </div>
                    </div>

                    <div class="flex items-center space-x-4">
                        <div class="text-lg font-semibold text-gray-800">
                            {{ getCurrentPeriodLabel() }}
                        </div>
                        <div class="flex items-center space-x-2">
                            <button (click)="previousPeriod()"
                                class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                                ‚Üê
                            </button>
                            <button (click)="today()"
                                class="px-3 py-1 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                Aujourd'hui
                            </button>
                            <button (click)="nextPeriod()"
                                class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                                ‚Üí
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Statistiques du planning -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Cette semaine</p>
                                <p class="text-2xl font-bold text-blue-600">{{ getThisWeekHours() }}h</p>
                            </div>
                            <span class="text-2xl">üìÖ</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Ce mois</p>
                                <p class="text-2xl font-bold text-green-600">{{ getThisMonthHours() }}h</p>
                            </div>
                            <span class="text-2xl">üìä</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-orange-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Prochaines missions</p>
                                <p class="text-2xl font-bold text-orange-600">{{ getUpcomingMissions() }}</p>
                            </div>
                            <span class="text-2xl">‚è∞</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-purple-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Disponibilit√©</p>
                                <p class="text-2xl font-bold text-purple-600">{{ getAvailabilityPercentage() }}%</p>
                            </div>
                            <span class="text-2xl">‚úÖ</span>
                        </div>
                    </div>
                </div>

                <!-- Vue Jour -->
                <div *ngIf="calendarView === 'day'" class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                        <h3 class="text-lg font-semibold text-gray-800">{{ currentDate | date:'EEEE d MMMM yyyy':'fr-FR'
                            }}</h3>
                    </div>

                    <div class="p-4">
                        <!-- Grille horaire horizontale -->
                        <div class="overflow-x-auto">
                            <div class="min-w-[1200px]">
                                <!-- En-t√™te des heures -->
                                <div class="flex border-b border-gray-200 pb-2 mb-4">
                                    <div *ngFor="let hour of getDayHours()"
                                        class="flex-1 min-w-[70px] text-center text-xs text-gray-500 font-medium border-r border-gray-100 last:border-r-0">
                                        {{ hour }}
                                    </div>
                                </div>

                                <!-- Zone des missions - hauteur augment√©e -->
                                <div class="relative h-48 bg-gray-50 rounded border">
                                    <!-- Lignes de s√©paration verticales pour les heures -->
                                    <div class="absolute inset-0 flex">
                                        <div *ngFor="let hour of getDayHours()"
                                            class="flex-1 min-w-[70px] border-r border-gray-200 last:border-r-0 h-full">
                                        </div>
                                    </div>

                                    <!-- Missions positionn√©es - hauteur et espacement augment√©s -->
                                    <div *ngFor="let mission of getDayMissions(currentDate); let i = index"
                                        class="absolute bg-blue-100 border border-blue-300 rounded p-3 shadow-sm cursor-pointer hover:bg-blue-200 transition-colors"
                                        [style.left.%]="getDayMissionPosition(mission).left"
                                        [style.width.%]="getDayMissionPosition(mission).width"
                                        [style.top.px]="10 + (i * 60)" [style.height.px]="50"
                                        [title]="mission.etablissement + ' - ' + mission.heureDebut + ' √† ' + mission.heureFin">

                                        <!-- Contenu de la mission avec meilleur espacement -->
                                        <div class="h-full flex flex-col justify-center">
                                            <div class="text-sm font-semibold text-blue-800 truncate leading-tight">
                                                {{ mission.etablissement }}
                                            </div>
                                            <div class="text-xs text-blue-600 mt-1">
                                                {{ mission.heureDebut }}-{{ mission.heureFin }}
                                            </div>
                                            <div class="text-xs text-blue-500 truncate">
                                                {{ mission.service }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Message si aucune mission -->
                                    <div *ngIf="getDayMissions(currentDate).length === 0"
                                        class="absolute inset-0 flex items-center justify-center text-gray-500">
                                        <div class="text-center">
                                            <span class="text-2xl block mb-1">üìÖ</span>
                                            <p class="text-sm">Aucune mission programm√©e</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Liste d√©taill√©e des missions du jour -->
                        <div *ngIf="getDayMissions(currentDate).length > 0" class="mt-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">D√©tails des missions</h4>
                            <div class="grid gap-4">
                                <div *ngFor="let mission of getDayMissions(currentDate)"
                                    class="bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-3 mb-2">
                                                <h5 class="text-lg font-semibold text-gray-900">{{ mission.etablissement
                                                    }}</h5>
                                                <span class="px-3 py-1 text-sm font-medium rounded-full"
                                                    [class]="getMissionStatusClass(mission.statut)">
                                                    {{ getMissionStatusLabel(mission.statut) }}
                                                </span>
                                            </div>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600">
                                                <div>
                                                    <p><strong>Service :</strong> {{ mission.service }}</p>
                                                    <p><strong>Sp√©cialit√© :</strong> {{ mission.specialite }}</p>
                                                    <p><strong>Horaires :</strong> {{ mission.heureDebut }} - {{
                                                        mission.heureFin }} ({{ mission.duree }}h)</p>
                                                </div>
                                                <div>
                                                    <p><strong>Adresse :</strong> {{ mission.adresse }}</p>
                                                    <p><strong>Contact :</strong> {{ mission.contact }}</p>
                                                    <p><strong>R√©mun√©ration :</strong> <span
                                                            class="font-semibold text-green-600">{{ mission.remuneration
                                                            }}‚Ç¨</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vue Semaine -->
                <div *ngIf="calendarView === 'week'" class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                        <h3 class="text-lg font-semibold text-gray-800">Semaine du {{ getWeekStart() | date:'d
                            MMMM':'fr-FR' }} au {{ getWeekEnd() | date:'d MMMM yyyy':'fr-FR' }}</h3>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full min-w-[800px]">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                        Heure</th>
                                    <th *ngFor="let day of getWeekDays()"
                                        class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        <div>{{ day | date:'EEEE':'fr' }}</div>
                                        <div class="text-lg font-bold text-gray-800">{{ day | date:'d':'fr' }}</div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let hour of getWorkingHours()" class="border-t border-gray-100">
                                    <td class="px-4 py-3 text-sm text-gray-500 border-r border-gray-100">{{ hour }}:00
                                    </td>
                                    <td *ngFor="let day of getWeekDays()"
                                        class="px-2 py-3 border-r border-gray-100 relative min-h-[60px] align-top">
                                        <div *ngFor="let mission of getHourMissions(day, hour)"
                                            class="bg-blue-100 border-l-4 border-blue-500 rounded p-1 mb-1 text-xs">
                                            <div class="font-medium text-blue-800">{{ mission.etablissement }}</div>
                                            <div class="text-blue-600">{{ mission.heureDebut }}-{{ mission.heureFin }}
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Vue Mois -->
                <div *ngIf="calendarView === 'month'" class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                        <h3 class="text-lg font-semibold text-gray-800">{{ currentDate | date:'MMMM yyyy':'fr-FR' |
                            titlecase }}</h3>
                    </div>

                    <div class="grid grid-cols-7 gap-0">
                        <!-- En-t√™tes des jours -->
                        <div *ngFor="let dayName of getDayNames()"
                            class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase bg-gray-50 border-b border-gray-200">
                            {{ dayName }}
                        </div>

                        <!-- Cases du calendrier -->
                        <div *ngFor="let day of getMonthDays()"
                            class="min-h-[120px] border-b border-r border-gray-200 p-2"
                            [class.bg-gray-50]="!isCurrentMonth(day)" [class.bg-blue-50]="isToday(day)">

                            <div class="flex justify-between items-start mb-2">
                                <span class="text-sm font-medium" [class.text-gray-400]="!isCurrentMonth(day)"
                                    [class.text-blue-600]="isToday(day)">
                                    {{ day | date:'d' }}
                                </span>
                                <span *ngIf="getDayMissions(day).length > 0"
                                    class="text-xs bg-blue-500 text-white rounded-full px-2 py-1">
                                    {{ getDayMissions(day).length }}
                                </span>
                            </div>

                            <div class="space-y-1">
                                <div *ngFor="let mission of getDayMissions(day).slice(0, 2)"
                                    class="text-xs bg-blue-100 text-blue-800 rounded px-2 py-1 truncate">
                                    {{ mission.heureDebut }} {{ mission.etablissement }}
                                </div>
                                <div *ngIf="getDayMissions(day).length > 2" class="text-xs text-gray-500">
                                    +{{ getDayMissions(day).length - 2 }} autre(s)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Prochaines missions -->
                <div class="bg-white rounded-lg shadow-sm">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-800">Prochaines missions</h3>
                    </div>

                    <div class="divide-y divide-gray-200">
                        <div *ngFor="let mission of getUpcomingMissionsList().slice(0, 5)"
                            class="px-6 py-4 hover:bg-gray-50 transition-colors">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="flex-shrink-0">
                                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                            <span class="text-blue-600 font-bold">{{ mission.dateMission | date:'d'
                                                }}</span>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-900">{{ mission.etablissement }}</h4>
                                        <p class="text-sm text-gray-600">{{ mission.specialite }} ‚Ä¢ {{ mission.service
                                            }}</p>
                                        <p class="text-xs text-gray-500">
                                            {{ mission.dateMission | date:'EEEE d MMMM':'fr-FR' }} ‚Ä¢
                                            {{ mission.heureDebut }} - {{ mission.heureFin }}
                                        </p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <span class="px-2 py-1 text-xs font-medium rounded-full"
                                        [class]="getMissionStatusClass(mission.statut)">
                                        {{ getMissionStatusLabel(mission.statut) }}
                                    </span>
                                    <button class="text-blue-600 hover:text-blue-800 text-sm">
                                        D√©tails ‚Üí
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="getUpcomingMissionsList().length === 0" class="px-6 py-12 text-center">
                        <span class="text-4xl mb-4 block">üìÖ</span>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">Aucune mission programm√©e</h3>
                        <p class="text-gray-500">Vos prochaines missions appara√Ætront ici d√®s qu'elles seront
                            planifi√©es.</p>
                    </div>
                </div>
            </div>

            <!-- Section Documents -->
            <div *ngIf="activeSection === 'documents'" class="space-y-6">
                <!-- Header modifi√© -->
                <div class="flex justify-end items-center">
                    <div class="text-sm text-gray-600">
                        <span class="font-medium">{{ getCompletedDocuments() }}/5</span> documents obligatoires
                        compl√©t√©s
                    </div>
                </div>

                <!-- Barre de progression -->
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium text-gray-700">Progression des documents</span>
                        <span class="text-sm text-gray-600">{{ getProgressPercentage() }}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] h-2 rounded-full transition-all duration-300"
                            [style.width.%]="getProgressPercentage()"></div>
                    </div>
                </div>

                <!-- Documents obligatoires -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- CV -->
                    <div class="bg-white rounded-lg shadow-sm border-2"
                        [class]="getDocument('cv') ? 'border-green-200' : 'border-red-200'">
                        <div class="p-6">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="p-3 rounded-lg"
                                        [class]="getDocument('cv') ? 'bg-green-100' : 'bg-red-100'">
                                        <span class="text-2xl">üìÑ</span>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-800">CV</h3>
                                        <p class="text-sm text-gray-600">Curriculum vitae √† jour</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span *ngIf="getDocument('cv')" class="text-green-500 text-xl">‚úÖ</span>
                                    <span *ngIf="!getDocument('cv')" class="text-red-500 text-xl">‚ùå</span>
                                </div>
                            </div>

                            <div *ngIf="getDocument('cv')" class="mt-4 p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-800">{{ getDocument('cv')?.nom }}</p>
                                        <p class="text-xs text-gray-500">
                                            Ajout√© le {{ getDocument('cv')?.dateUpload | date:'dd/MM/yyyy' }}
                                        </p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button (click)="viewDocument(getDocument('cv'))"
                                            class="text-blue-600 hover:text-blue-800 text-sm">üëÅÔ∏è</button>
                                        <button (click)="downloadDocument(getDocument('cv'))"
                                            class="text-green-600 hover:text-green-800 text-sm">üì•</button>
                                        <button (click)="replaceDocument('cv')"
                                            class="text-orange-600 hover:text-orange-800 text-sm">üîÑ</button>
                                    </div>
                                </div>
                            </div>

                            <button *ngIf="!getDocument('cv')" (click)="openUploadModal('cv')"
                                class="mt-4 w-full px-4 py-2 bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] text-white rounded-lg hover:from-[#5A94E8] hover:to-[#FF5555] transition-all duration-300">
                                üì§ D√©poser mon CV
                            </button>
                        </div>
                    </div>

                    <!-- Dipl√¥me -->
                    <div class="bg-white rounded-lg shadow-sm border-2"
                        [class]="getDocument('diplome') ? 'border-green-200' : 'border-red-200'">
                        <div class="p-6">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="p-3 rounded-lg"
                                        [class]="getDocument('diplome') ? 'bg-green-100' : 'bg-red-100'">
                                        <span class="text-2xl">üéì</span>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-800">Dipl√¥me</h3>
                                        <p class="text-sm text-gray-600">Dipl√¥me professionnel</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span *ngIf="getDocument('diplome')" class="text-green-500 text-xl">‚úÖ</span>
                                    <span *ngIf="!getDocument('diplome')" class="text-red-500 text-xl">‚ùå</span>
                                </div>
                            </div>

                            <div *ngIf="getDocument('diplome')" class="mt-4 p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-800">{{ getDocument('diplome')?.nom }}
                                        </p>
                                        <p class="text-xs text-gray-500">
                                            Ajout√© le {{ getDocument('diplome')?.dateUpload | date:'dd/MM/yyyy' }}
                                        </p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button (click)="viewDocument(getDocument('diplome'))"
                                            class="text-blue-600 hover:text-blue-800 text-sm">üëÅÔ∏è</button>
                                        <button (click)="downloadDocument(getDocument('diplome'))"
                                            class="text-green-600 hover:text-green-800 text-sm">üì•</button>
                                        <button (click)="replaceDocument('diplome')"
                                            class="text-orange-600 hover:text-orange-800 text-sm">üîÑ</button>
                                    </div>
                                </div>
                            </div>

                            <button *ngIf="!getDocument('diplome')" (click)="openUploadModal('diplome')"
                                class="mt-4 w-full px-4 py-2 bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] text-white rounded-lg hover:from-[#5A94E8] hover:to-[#FF5555] transition-all duration-300">
                                üì§ D√©poser mon dipl√¥me
                            </button>
                        </div>
                    </div>

                    <!-- Pi√®ce d'identit√© -->
                    <div class="bg-white rounded-lg shadow-sm border-2"
                        [class]="getDocument('identite') ? 'border-green-200' : 'border-red-200'">
                        <div class="p-6">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="p-3 rounded-lg"
                                        [class]="getDocument('identite') ? 'bg-green-100' : 'bg-red-100'">
                                        <span class="text-2xl">üÜî</span>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-800">Pi√®ce d'identit√©</h3>
                                        <p class="text-sm text-gray-600">CNI, passeport ou permis</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span *ngIf="getDocument('identite')" class="text-green-500 text-xl">‚úÖ</span>
                                    <span *ngIf="!getDocument('identite')" class="text-red-500 text-xl">‚ùå</span>
                                </div>
                            </div>

                            <div *ngIf="getDocument('identite')" class="mt-4 p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-800">{{ getDocument('identite')?.nom }}
                                        </p>
                                        <p class="text-xs text-gray-500">
                                            Ajout√© le {{ getDocument('identite')?.dateUpload | date:'dd/MM/yyyy' }}
                                        </p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button (click)="viewDocument(getDocument('identite'))"
                                            class="text-blue-600 hover:text-blue-800 text-sm">üëÅÔ∏è</button>
                                        <button (click)="downloadDocument(getDocument('identite'))"
                                            class="text-green-600 hover:text-green-800 text-sm">üì•</button>
                                        <button (click)="replaceDocument('identite')"
                                            class="text-orange-600 hover:text-orange-800 text-sm">üîÑ</button>
                                    </div>
                                </div>
                            </div>

                            <button *ngIf="!getDocument('identite')" (click)="openUploadModal('identite')"
                                class="mt-4 w-full px-4 py-2 bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] text-white rounded-lg hover:from-[#5A94E8] hover:to-[#FF5555] transition-all duration-300">
                                üì§ D√©poser ma pi√®ce d'identit√©
                            </button>
                        </div>
                    </div>

                    <!-- RIB/IBAN -->
                    <div class="bg-white rounded-lg shadow-sm border-2"
                        [class]="getDocument('rib') ? 'border-green-200' : 'border-red-200'">
                        <div class="p-6">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="p-3 rounded-lg"
                                        [class]="getDocument('rib') ? 'bg-green-100' : 'bg-red-100'">
                                        <span class="text-2xl">üè¶</span>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-800">RIB/IBAN</h3>
                                        <p class="text-sm text-gray-600">Relev√© d'identit√© bancaire</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span *ngIf="getDocument('rib')" class="text-green-500 text-xl">‚úÖ</span>
                                    <span *ngIf="!getDocument('rib')" class="text-red-500 text-xl">‚ùå</span>
                                </div>
                            </div>

                            <div *ngIf="getDocument('rib')" class="mt-4 p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-800">{{ getDocument('rib')?.nom }}</p>
                                        <p class="text-xs text-gray-500">
                                            Ajout√© le {{ getDocument('rib')?.dateUpload | date:'dd/MM/yyyy' }}
                                        </p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button (click)="viewDocument(getDocument('rib'))"
                                            class="text-blue-600 hover:text-blue-800 text-sm">üëÅÔ∏è</button>
                                        <button (click)="downloadDocument(getDocument('rib'))"
                                            class="text-green-600 hover:text-green-800 text-sm">üì•</button>
                                        <button (click)="replaceDocument('rib')"
                                            class="text-orange-600 hover:text-orange-800 text-sm">üîÑ</button>
                                    </div>
                                </div>
                            </div>

                            <button *ngIf="!getDocument('rib')" (click)="openUploadModal('rib')"
                                class="mt-4 w-full px-4 py-2 bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] text-white rounded-lg hover:from-[#5A94E8] hover:to-[#FF5555] transition-all duration-300">
                                üì§ D√©poser mon RIB
                            </button>
                        </div>
                    </div>

                    <!-- Attestation s√©curit√© sociale -->
                    <div class="bg-white rounded-lg shadow-sm border-2"
                        [class]="getDocument('secu') ? 'border-green-200' : 'border-red-200'">
                        <div class="p-6">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="p-3 rounded-lg"
                                        [class]="getDocument('secu') ? 'bg-green-100' : 'bg-red-100'">
                                        <span class="text-2xl">üè•</span>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-800">Attestation s√©cu</h3>
                                        <p class="text-sm text-gray-600">Attestation de s√©curit√© sociale</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span *ngIf="getDocument('secu')" class="text-green-500 text-xl">‚úÖ</span>
                                    <span *ngIf="!getDocument('secu')" class="text-red-500 text-xl">‚ùå</span>
                                </div>
                            </div>

                            <div *ngIf="getDocument('secu')" class="mt-4 p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-800">{{ getDocument('secu')?.nom }}</p>
                                        <p class="text-xs text-gray-500">
                                            Ajout√© le {{ getDocument('secu')?.dateUpload | date:'dd/MM/yyyy' }}
                                        </p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button (click)="viewDocument(getDocument('secu'))"
                                            class="text-blue-600 hover:text-blue-800 text-sm">üëÅÔ∏è</button>
                                        <button (click)="downloadDocument(getDocument('secu'))"
                                            class="text-green-600 hover:text-green-800 text-sm">üì•</button>
                                        <button (click)="replaceDocument('secu')"
                                            class="text-orange-600 hover:text-orange-800 text-sm">üîÑ</button>
                                    </div>
                                </div>
                            </div>

                            <button *ngIf="!getDocument('secu')" (click)="openUploadModal('secu')"
                                class="mt-4 w-full px-4 py-2 bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] text-white rounded-lg hover:from-[#5A94E8] hover:to-[#FF5555] transition-all duration-300">
                                üì§ D√©poser mon attestation
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Aide et informations -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <div class="flex items-start space-x-3">
                        <span class="text-blue-500 text-xl">üí°</span>
                        <div>
                            <h4 class="font-semibold text-blue-800 mb-2">Aide pour vos documents</h4>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>‚Ä¢ <strong>CV :</strong> Document r√©cent au format PDF (max 5MB)</li>
                                <li>‚Ä¢ <strong>Dipl√¥me :</strong> Copie de votre dipl√¥me principal</li>
                                <li>‚Ä¢ <strong>Pi√®ce d'identit√© :</strong> CNI, passeport ou permis de conduire</li>
                                <li>‚Ä¢ <strong>RIB :</strong> Relev√© d'identit√© bancaire pour les virements</li>
                                <li>‚Ä¢ <strong>Attestation s√©cu :</strong> T√©l√©chargeable sur ameli.fr</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal d'upload -->
            <div *ngIf="showUploadModal"
                class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">
                            Ajouter : {{ getDocumentTypeLabel(currentUploadType) }}
                        </h3>
                        <button (click)="closeUploadModal()" class="text-gray-400 hover:text-gray-600">
                            <span class="text-xl">‚úï</span>
                        </button>
                    </div>

                    <form [formGroup]="uploadForm" (ngSubmit)="uploadDocument()">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Fichier</label>
                                <input type="file" (change)="onFileSelected($event)"
                                    accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <p class="text-xs text-gray-500 mt-1">Formats: PDF, DOC, DOCX, JPG, PNG (Max: 10MB)</p>
                            </div>

                            <div *ngIf="selectedFile" class="p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center space-x-2">
                                    <span class="text-green-500">üìé</span>
                                    <span class="text-sm font-medium">{{ selectedFile.name }}</span>
                                    <span class="text-xs text-gray-500">({{ getFileSize(selectedFile.size) }})</span>
                                </div>
                            </div>
                        </div>

                        <div class="flex space-x-3 mt-6">
                            <button type="submit" [disabled]="!selectedFile"
                                class="flex-1 px-4 py-2 bg-gradient-to-r from-[#6FA4F2] to-[#FF6B6B] text-white rounded-lg hover:from-[#5A94E8] hover:to-[#FF5555] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                                T√©l√©charger
                            </button>
                            <button type="button" (click)="closeUploadModal()"
                                class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">
                                Annuler
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Section Messages -->
            <div *ngIf="activeSection === 'messages'" class="space-y-6">
                <!-- Header avec filtres et nouveau message -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                    <div class="flex items-center space-x-4">
                        <!-- Filtres -->
                        <div class="flex bg-white rounded-lg shadow-sm border">
                            <button (click)="setMessageFilter('tous')"
                                [class]="'px-4 py-2 text-sm font-medium transition-colors ' + (messageFilter === 'tous' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-50')">
                                Tous ({{ getTotalMessages() }})
                            </button>
                            <button (click)="setMessageFilter('non_lus')"
                                [class]="'px-4 py-2 text-sm font-medium transition-colors ' + (messageFilter === 'non_lus' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-50')">
                                Non lus ({{ getUnreadMessages() }})
                            </button>
                            <button (click)="setMessageFilter('importants')"
                                [class]="'px-4 py-2 text-sm font-medium transition-colors ' + (messageFilter === 'importants' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-50')">
                                Importants ({{ getImportantMessages() }})
                            </button>
                        </div>
                    </div>

                    <button (click)="openNewMessageModal()"
                        class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2">
                        <span>‚úâÔ∏è</span>
                        <span>Nouveau message</span>
                    </button>
                </div>

                <!-- Statistiques rapides -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Messages re√ßus</p>
                                <p class="text-2xl font-bold text-blue-600">{{ getTotalMessages() }}</p>
                            </div>
                            <span class="text-2xl">üì¨</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-orange-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Non lus</p>
                                <p class="text-2xl font-bold text-orange-600">{{ getUnreadMessages() }}</p>
                            </div>
                            <span class="text-2xl">üîî</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-red-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Importants</p>
                                <p class="text-2xl font-bold text-red-600">{{ getImportantMessages() }}</p>
                            </div>
                            <span class="text-2xl">‚≠ê</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Cette semaine</p>
                                <p class="text-2xl font-bold text-green-600">{{ getWeekMessages() }}</p>
                            </div>
                            <span class="text-2xl">üìÖ</span>
                        </div>
                    </div>
                </div>

                <!-- Barre de recherche -->
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="relative">
                        <input type="text" [(ngModel)]="messageSearchTerm" (input)="filterMessages()"
                            placeholder="Rechercher dans les messages..."
                            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <span class="absolute left-3 top-2.5 text-gray-400">üîç</span>
                    </div>
                </div>

                <!-- Liste des messages -->
                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                        <h3 class="text-lg font-semibold text-gray-800">
                            {{ getFilterTitle() }}
                            <span class="text-sm font-normal text-gray-500">({{ getFilteredMessages().length }})</span>
                        </h3>
                    </div>

                    <div class="divide-y divide-gray-200 max-h-[600px] overflow-y-auto">
                        <div *ngFor="let message of getFilteredMessages()"
                            class="px-6 py-4 hover:bg-gray-50 transition-colors cursor-pointer"
                            (click)="openMessage(message)" [class.bg-blue-50]="!message.lu">

                            <div class="flex items-start justify-between">
                                <div class="flex items-start space-x-3 flex-1">
                                    <!-- Avatar de l'exp√©diteur -->
                                    <div class="flex-shrink-0">
                                        <div
                                            class="w-10 h-10 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold">
                                            {{ getInitials(message.expediteur) }}
                                        </div>
                                    </div>

                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <h4 class="text-sm font-semibold text-gray-900 truncate">{{
                                                message.expediteur }}</h4>
                                            <span *ngIf="message.important" class="text-red-500">‚≠ê</span>
                                            <span *ngIf="!message.lu" class="w-2 h-2 bg-blue-500 rounded-full"></span>
                                        </div>

                                        <h5 class="text-sm font-medium text-gray-800 mb-1 truncate"
                                            [class.font-bold]="!message.lu">
                                            {{ message.sujet }}
                                        </h5>

                                        <p class="text-sm text-gray-600 truncate">{{ message.contenu }}</p>

                                        <div class="flex items-center space-x-4 mt-2 text-xs text-gray-500">
                                            <span>{{ message.dateEnvoi | date:'dd/MM/yyyy √† HH:mm':'fr-FR' }}</span>
                                            <span class="px-2 py-1 rounded-full text-xs"
                                                [class]="getMessageCategoryClass(message.categorie)">
                                                {{ getMessageCategoryLabel(message.categorie) }}
                                            </span>
                                            <span *ngIf="message.urgent"
                                                class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium">
                                                URGENT
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex items-center space-x-2 ml-4">
                                    <button (click)="toggleImportant(message); $event.stopPropagation()"
                                        class="p-1 rounded hover:bg-gray-200 transition-colors"
                                        [class.text-red-500]="message.important">
                                        ‚≠ê
                                    </button>
                                    <button (click)="toggleRead(message); $event.stopPropagation()"
                                        class="p-1 rounded hover:bg-gray-200 transition-colors">
                                        {{ message.lu ? 'üìñ' : 'üì¨' }}
                                    </button>
                                    <button (click)="deleteMessage(message); $event.stopPropagation()"
                                        class="p-1 rounded hover:bg-gray-200 transition-colors text-red-500">
                                        üóëÔ∏è
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Message si aucun r√©sultat -->
                    <div *ngIf="getFilteredMessages().length === 0" class="px-6 py-12 text-center">
                        <span class="text-4xl mb-4 block">üì≠</span>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">Aucun message trouv√©</h3>
                        <p class="text-gray-500">{{ getEmptyStateMessage() }}</p>
                    </div>
                </div>
            </div>

            <!-- Modal de lecture de message -->
            <div *ngIf="selectedMessage"
                class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
                (click)="closeMessage()">
                <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden"
                    (click)="$event.stopPropagation()">

                    <!-- Header du message -->
                    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                        <div class="flex items-start justify-between">
                            <div class="flex items-start space-x-3">
                                <div
                                    class="w-12 h-12 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold">
                                    {{ getInitials(selectedMessage.expediteur) }}
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900 flex items-center space-x-2">
                                        <span>{{ selectedMessage.sujet }}</span>
                                        <span *ngIf="selectedMessage.important" class="text-red-500">‚≠ê</span>
                                        <span *ngIf="selectedMessage.urgent"
                                            class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium">
                                            URGENT
                                        </span>
                                    </h3>
                                    <p class="text-sm text-gray-600">De : {{ selectedMessage.expediteur }}</p>
                                    <p class="text-xs text-gray-500">{{ selectedMessage.dateEnvoi | date:'EEEE d MMMM
                                        yyyy √† HH:mm':'fr-FR' }}</p>
                                </div>
                            </div>
                            <button (click)="closeMessage()" class="text-gray-400 hover:text-gray-600 text-xl">
                                ‚úï
                            </button>
                        </div>
                    </div>

                    <!-- Contenu du message -->
                    <div class="px-6 py-4 max-h-[50vh] overflow-y-auto">
                        <div class="prose max-w-none text-gray-800 whitespace-pre-wrap">{{ selectedMessage.contenu }}
                        </div>

                        <div *ngIf="selectedMessage.pieceJointe" class="mt-4 p-3 bg-gray-50 rounded border">
                            <p class="text-sm text-gray-600 mb-2">Pi√®ce jointe :</p>
                            <button class="text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-2">
                                <span>üìé</span>
                                <span>{{ selectedMessage.pieceJointe }}</span>
                            </button>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-between">
                        <div class="flex space-x-2">
                            <button (click)="replyToMessage(selectedMessage)"
                                class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors">
                                R√©pondre
                            </button>
                            <button (click)="toggleImportant(selectedMessage)"
                                class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50 transition-colors"
                                [class.bg-red-50]="selectedMessage.important">
                                {{ selectedMessage.important ? 'Retirer des importants' : 'Marquer important' }}
                            </button>
                        </div>
                        <button (click)="deleteMessage(selectedMessage)"
                            class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors">
                            Supprimer
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal nouveau message -->
            <div *ngIf="showNewMessageModal"
                class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
                (click)="closeNewMessageModal()">
                <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4" (click)="$event.stopPropagation()">

                    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                        <h3 class="text-lg font-semibold text-gray-900">Nouveau message</h3>
                    </div>

                    <form [formGroup]="newMessageForm" (ngSubmit)="sendMessage()" class="p-6 space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Destinataire</label>
                            <select formControlName="destinataire"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">S√©lectionner un destinataire</option>
                                <option value="admin">Administration ALENIA</option>
                                <option value="rh">Service RH</option>
                                <option value="planning">Service Planning</option>
                                <option value="support">Support technique</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Sujet</label>
                            <input type="text" formControlName="sujet"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Sujet du message">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
                            <textarea formControlName="contenu" rows="6"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Votre message..."></textarea>
                        </div>

                        <div class="flex items-center space-x-4">
                            <label class="flex items-center">
                                <input type="checkbox" formControlName="urgent" class="mr-2">
                                <span class="text-sm text-gray-700">Message urgent</span>
                            </label>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4">
                            <button type="button" (click)="closeNewMessageModal()"
                                class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                                Annuler
                            </button>
                            <button type="submit" [disabled]="!newMessageForm.valid"
                                class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                                Envoyer
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Section Param√®tres -->
            <div *ngIf="activeSection === 'parametres'" class="space-y-6">
                <!-- Navigation des sous-sections -->
                <div class="bg-white rounded-lg shadow-sm p-4">
                    <div class="flex flex-wrap gap-2">
                        <button (click)="setParameterSection('compte')"
                            [class]="'px-4 py-2 text-sm font-medium rounded-lg transition-colors ' + (parameterSection === 'compte' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-100')">
                            üë§ Mon compte
                        </button>
                        <button (click)="setParameterSection('notifications')"
                            [class]="'px-4 py-2 text-sm font-medium rounded-lg transition-colors ' + (parameterSection === 'notifications' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-100')">
                            üîî Notifications
                        </button>
                        <button (click)="setParameterSection('preferences')"
                            [class]="'px-4 py-2 text-sm font-medium rounded-lg transition-colors ' + (parameterSection === 'preferences' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-100')">
                            ‚öôÔ∏è Pr√©f√©rences
                        </button>
                        <button (click)="setParameterSection('securite')"
                            [class]="'px-4 py-2 text-sm font-medium rounded-lg transition-colors ' + (parameterSection === 'securite' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-100')">
                            üîí S√©curit√©
                        </button>
                        <button (click)="setParameterSection('support')"
                            [class]="'px-4 py-2 text-sm font-medium rounded-lg transition-colors ' + (parameterSection === 'support' ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-100')">
                            üìû Support
                        </button>
                    </div>
                </div>

                <!-- Section Mon compte -->
                <div *ngIf="parameterSection === 'compte'" class="space-y-6">
                    <!-- Informations personnelles -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Informations personnelles</h3>
                            <p class="text-sm text-gray-600">G√©rez vos informations de profil</p>
                        </div>

                        <form [formGroup]="settingsForm" class="p-6 space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Pr√©nom</label>
                                    <input type="text" formControlName="prenom"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Nom</label>
                                    <input type="text" formControlName="nom"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" formControlName="email"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">T√©l√©phone</label>
                                    <input type="tel" formControlName="telephone"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Date de
                                        naissance</label>
                                    <input type="date" formControlName="dateNaissance"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Adresse</label>
                                <textarea formControlName="adresse" rows="3"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                            </div>

                            <div class="flex justify-end space-x-3 pt-4">
                                <button type="button" (click)="resetAccountSettings()"
                                    class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                                    Annuler
                                </button>
                                <button type="button" (click)="saveAccountSettings()"
                                    class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors">
                                    Sauvegarder
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Photo de profil -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Photo de profil</h3>
                            <p class="text-sm text-gray-600">Ajoutez ou modifiez votre photo de profil</p>
                        </div>

                        <div class="p-6">
                            <div class="flex items-center space-x-6">
                                <div
                                    class="w-24 h-24 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white text-2xl font-bold">
                                    {{ getInitials(userProfile.prenom + ' ' + userProfile.nom) }}
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-600 mb-2">JPG, PNG ou GIF. Maximum 5MB.</p>
                                    <div class="flex space-x-3">
                                        <button
                                            class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors">
                                            Changer la photo
                                        </button>
                                        <button
                                            class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                                            Supprimer
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section Notifications -->
                <div *ngIf="parameterSection === 'notifications'" class="space-y-6">
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Pr√©f√©rences de notifications</h3>
                            <p class="text-sm text-gray-600">Choisissez comment vous souhaitez √™tre notifi√©</p>
                        </div>

                        <div class="p-6 space-y-6">
                            <!-- Notifications par email -->
                            <div>
                                <h4 class="text-md font-medium text-gray-800 mb-3">Notifications par email</h4>
                                <div class="space-y-3">
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Nouvelles missions disponibles</span>
                                        <input type="checkbox" [checked]="notificationSettings.email.missions"
                                            (change)="updateNotificationSetting('email', 'missions', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Confirmations de missions</span>
                                        <input type="checkbox" [checked]="notificationSettings.email.confirmations"
                                            (change)="updateNotificationSetting('email', 'confirmations', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Rappels de missions</span>
                                        <input type="checkbox" [checked]="notificationSettings.email.rappels"
                                            (change)="updateNotificationSetting('email', 'rappels', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Messages importants</span>
                                        <input type="checkbox" [checked]="notificationSettings.email.messages"
                                            (change)="updateNotificationSetting('email', 'messages', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                </div>
                            </div>

                            <!-- Notifications SMS -->
                            <div>
                                <h4 class="text-md font-medium text-gray-800 mb-3">Notifications SMS</h4>
                                <div class="space-y-3">
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Missions urgentes</span>
                                        <input type="checkbox" [checked]="notificationSettings.sms.urgent"
                                            (change)="updateNotificationSetting('sms', 'urgent', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Rappels 24h avant mission</span>
                                        <input type="checkbox" [checked]="notificationSettings.sms.rappels24h"
                                            (change)="updateNotificationSetting('sms', 'rappels24h', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Changements de planning</span>
                                        <input type="checkbox" [checked]="notificationSettings.sms.changements"
                                            (change)="updateNotificationSetting('sms', 'changements', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                </div>
                            </div>

                            <!-- Notifications push -->
                            <div>
                                <h4 class="text-md font-medium text-gray-800 mb-3">Notifications push (application)</h4>
                                <div class="space-y-3">
                                    <label class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Toutes les notifications</span>
                                        <input type="checkbox" [checked]="notificationSettings.push.enabled"
                                            (change)="updateNotificationSetting('push', 'enabled', $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section Pr√©f√©rences -->
                <div *ngIf="parameterSection === 'preferences'" class="space-y-6">
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Pr√©f√©rences de travail</h3>
                            <p class="text-sm text-gray-600">Configurez vos pr√©f√©rences pour les missions</p>
                        </div>

                        <div class="p-6 space-y-6">
                            <!-- Zones g√©ographiques -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Zones g√©ographiques
                                    pr√©f√©r√©es</label>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                    <label *ngFor="let zone of availableZones" class="flex items-center">
                                        <input type="checkbox" [checked]="workPreferences.zones.includes(zone.id)"
                                            (change)="toggleZonePreference(zone.id, $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2">
                                        <span class="text-sm text-gray-700">{{ zone.nom }}</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Types d'√©tablissements -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Types d'√©tablissements
                                    pr√©f√©r√©s</label>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <label *ngFor="let type of etablissementTypes" class="flex items-center">
                                        <input type="checkbox"
                                            [checked]="workPreferences.etablissements.includes(type.id)"
                                            (change)="toggleEtablissementPreference(type.id, $event)"
                                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2">
                                        <span class="text-sm text-gray-700">{{ type.nom }}</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Horaires -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Cr√©neaux horaires
                                    pr√©f√©r√©s</label>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs text-gray-600 mb-1">Heure de d√©but minimale</label>
                                        <select [(ngModel)]="workPreferences.heureDebutMin"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                            <option value="05:00">05:00</option>
                                            <option value="06:00">06:00</option>
                                            <option value="07:00">07:00</option>
                                            <option value="08:00">08:00</option>
                                            <option value="09:00">09:00</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-600 mb-1">Heure de fin maximale</label>
                                        <select [(ngModel)]="workPreferences.heureFinMax"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                            <option value="18:00">18:00</option>
                                            <option value="20:00">20:00</option>
                                            <option value="22:00">22:00</option>
                                            <option value="00:00">00:00</option>
                                            <option value="02:00">02:00</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Distance maximale -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">
                                    Distance maximale : {{ workPreferences.distanceMax }} km
                                </label>
                                <input type="range" [(ngModel)]="workPreferences.distanceMax" min="5" max="100" step="5"
                                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>5 km</span>
                                    <span>100 km</span>
                                </div>
                            </div>

                            <div class="flex justify-end space-x-3 pt-4">
                                <button (click)="resetWorkPreferences()"
                                    class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                                    R√©initialiser
                                </button>
                                <button (click)="saveWorkPreferences()"
                                    class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors">
                                    Sauvegarder
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section S√©curit√© -->
                <div *ngIf="parameterSection === 'securite'" class="space-y-6">
                    <!-- Changer mot de passe -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Changer le mot de passe</h3>
                            <p class="text-sm text-gray-600">Mettez √† jour votre mot de passe pour s√©curiser votre
                                compte</p>
                        </div>

                        <form [formGroup]="passwordForm" (ngSubmit)="changePassword()" class="p-6 space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Mot de passe actuel</label>
                                <input type="password" formControlName="currentPassword"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nouveau mot de passe</label>
                                <input type="password" formControlName="newPassword"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <p class="text-xs text-gray-500 mt-1">Au moins 8 caract√®res avec majuscules, minuscules
                                    et chiffres</p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Confirmer le nouveau mot de
                                    passe</label>
                                <input type="password" formControlName="confirmPassword"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>

                            <div class="flex justify-end space-x-3 pt-4">
                                <button type="button" (click)="resetPasswordForm()"
                                    class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                                    Annuler
                                </button>
                                <button type="submit" [disabled]="!passwordForm.valid"
                                    class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                                    Changer le mot de passe
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Authentification √† deux facteurs -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Authentification √† deux facteurs (2FA)</h3>
                            <p class="text-sm text-gray-600">Renforcez la s√©curit√© de votre compte</p>
                        </div>

                        <div class="p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="text-md font-medium text-gray-800">Authentification par SMS</h4>
                                    <p class="text-sm text-gray-600">Recevez un code par SMS lors de la connexion</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" [checked]="securitySettings.twoFactor.enabled"
                                        (change)="toggleTwoFactor($event)" class="sr-only peer">
                                    <div
                                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
                                    </div>
                                </label>
                            </div>

                            <div *ngIf="securitySettings.twoFactor.enabled"
                                class="mt-4 p-3 bg-green-50 border border-green-200 rounded-md">
                                <p class="text-sm text-green-700">‚úÖ L'authentification √† deux facteurs est activ√©e</p>
                                <p class="text-xs text-green-600">Num√©ro configur√© : {{ securitySettings.twoFactor.phone
                                    }}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Sessions actives -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Sessions actives</h3>
                            <p class="text-sm text-gray-600">G√©rez vos connexions actives</p>
                        </div>

                        <div class="divide-y divide-gray-200">
                            <div *ngFor="let session of activeSessions" class="px-6 py-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">{{ getDeviceIcon(session.device) }}</span>
                                        <div>
                                            <h4 class="text-sm font-medium text-gray-900">{{ session.device }}</h4>
                                            <p class="text-xs text-gray-500">{{ session.location }} ‚Ä¢ {{
                                                session.lastActive | date:'dd/MM/yyyy √† HH:mm':'fr-FR' }}</p>
                                            <span *ngIf="session.current"
                                                class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                                                Session actuelle
                                            </span>
                                        </div>
                                    </div>
                                    <button *ngIf="!session.current" (click)="revokeSession(session)"
                                        class="text-red-600 hover:text-red-800 text-sm">
                                        R√©voquer
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section Support -->
                <div *ngIf="parameterSection === 'support'" class="space-y-6">
                    <!-- Contact support -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Contacter le support</h3>
                            <p class="text-sm text-gray-600">Besoin d'aide ? Notre √©quipe est l√† pour vous accompagner
                            </p>
                        </div>

                        <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div
                                class="text-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors">
                                <span class="text-3xl block mb-2">üìß</span>
                                <h4 class="font-medium text-gray-900 mb-1">Email</h4>
                                <p class="text-sm text-gray-600 mb-3">support&#64;alenia.fr</p>
                                <button class="text-blue-600 hover:text-blue-800 text-sm">Envoyer un email</button>
                            </div>

                            <div
                                class="text-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors">
                                <span class="text-3xl block mb-2">üìû</span>
                                <h4 class="font-medium text-gray-900 mb-1">T√©l√©phone</h4>
                                <p class="text-sm text-gray-600 mb-3">01 23 45 67 89</p>
                                <button class="text-blue-600 hover:text-blue-800 text-sm">Appeler</button>
                            </div>

                            <div
                                class="text-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors">
                                <span class="text-3xl block mb-2">üí¨</span>
                                <h4 class="font-medium text-gray-900 mb-1">Chat en direct</h4>
                                <p class="text-sm text-gray-600 mb-3">Lun-Ven 9h-18h</p>
                                <button class="text-blue-600 hover:text-blue-800 text-sm">Ouvrir le chat</button>
                            </div>
                        </div>
                    </div>

                    <!-- FAQ -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Questions fr√©quentes</h3>
                        </div>

                        <div class="divide-y divide-gray-200">
                            <div *ngFor="let faq of faqItems" class="px-6 py-4">
                                <button (click)="toggleFaq(faq)"
                                    class="w-full text-left flex items-center justify-between hover:bg-gray-50 p-2 -m-2 rounded">
                                    <h4 class="text-sm font-medium text-gray-900">{{ faq.question }}</h4>
                                    <span class="text-gray-400">{{ faq.open ? '‚àí' : '+' }}</span>
                                </button>
                                <div *ngIf="faq.open" class="mt-3 text-sm text-gray-600">
                                    {{ faq.reponse }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Informations l√©gales -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800">Informations l√©gales</h3>
                        </div>

                        <div class="p-6 space-y-3">
                            <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Conditions g√©n√©rales
                                d'utilisation</a>
                            <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Politique de
                                confidentialit√©</a>
                            <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Mentions l√©gales</a>
                            <a href="#" class="block text-blue-600 hover:text-blue-800 text-sm">Politique de cookies</a>
                        </div>
                    </div>

                    <!-- Version de l'application -->
                    <div class="bg-white rounded-lg shadow-sm">
                        <div class="p-6 text-center text-sm text-gray-500">
                            <p>Application ALENIA v2.1.0</p>
                            <p>Derni√®re mise √† jour : 15 juin 2025</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>