<div
  class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 font-inter pt-20"
>
  <main class="container mx-auto max-w-2xl px-4 py-8">
    <div class="space-y-4 mb-6">
      <button
        routerLink="/page-accueil"
        class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors duration-200 font-medium"
      >
        <svg
          class="w-5 h-5 mr-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
        Retour à l'accueil
      </button>

      <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">
              Créer un compte
            </h1>
            <p class="text-gray-600">
              Rejoignez notre plateforme et découvrez de nouvelles opportunités
            </p>
          </div>
          <img
            src="/assets/images/logo.png"
            alt="Logo Alenia"
            class="w-16 h-16 object-contain"
          />
        </div>

        <div class="text-center mb-6 p-4 bg-blue-50 rounded-lg">
          <p class="text-sm text-gray-700">
            Déjà un compte ?
            <a
              routerLink="/connexion"
              class="text-blue-600 hover:text-blue-800 font-semibold"
            >
              Se connecter
            </a>
          </p>
        </div>

        <!-- Zone d'affichage des notifications -->
        <div id="toast-container" class="mb-6"></div>

        <form
          #registrationForm="ngForm"
          (ngSubmit)="onSubmit(registrationForm)"
          class="space-y-6"
          novalidate
        >
          <!-- Sélection du rôle utilisateur -->
          <div>
            <label
              for="role"
              class="block text-sm font-semibold text-gray-700 mb-2"
            >
              Type de compte <span class="text-red-500">*</span>
            </label>
            <select
              name="role"
              id="role"
              [(ngModel)]="formData.role"
              required
              #role="ngModel"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
            >
              <option value="" disabled selected>
                Choisissez un type de compte
              </option>
              <option value="etablissement">Établissement</option>
              <option value="interimaire">Intérimaire</option>
            </select>
            <div
              *ngIf="role.invalid && role.touched"
              class="mt-1 text-sm text-red-600"
            >
              Le type de compte est requis
            </div>
          </div>

          <!-- Champs spécifiques ETABLISSEMENT -->
          <div *ngIf="formData.role === 'etablissement'" class="mb-4">
            <label
              for="nom"
              class="block text-sm font-semibold text-gray-700 mb-2"
            >
              Nom de l'établissement <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              name="nom"
              id="nom"
              [(ngModel)]="formData.lastName"
              required
              #nom="ngModel"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Nom de l'établissement"
            />
            <div
              *ngIf="nom.invalid && nom.touched"
              class="mt-1 text-sm text-red-600"
            >
              Le nom de l'établissement est requis
            </div>

            <label
              for="adresse"
              class="block text-sm font-semibold text-gray-700 mb-2 mt-4"
            >
              Adresse <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              name="adresse"
              id="adresse"
              [(ngModel)]="formData.adresse"
              required
              #adresse="ngModel"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Adresse de l'établissement"
            />
            <div
              *ngIf="adresse.invalid && adresse.touched"
              class="mt-1 text-sm text-red-600"
            >
              L'adresse est requise
            </div>

            <label
              for="typeEtablissement"
              class="block text-sm font-semibold text-gray-700 mb-2 mt-4"
            >
              Type d'établissement
            </label>
            <input
              type="text"
              name="typeEtablissement"
              id="typeEtablissement"
              [(ngModel)]="formData.typeEtablissement"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Ex: Hôpital, Clinique, Laboratoire..."
            />
          </div>

          <!-- Champs spécifiques INTERIMAIRE -->
          <div *ngIf="formData.role === 'interimaire'" class="mb-4">
            <label
              for="prenom"
              class="block text-sm font-semibold text-gray-700 mb-2"
            >
              Prénom <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              name="prenom"
              id="prenom"
              [(ngModel)]="formData.firstName"
              required
              #prenom="ngModel"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Votre prénom"
            />
            <div
              *ngIf="prenom.invalid && prenom.touched"
              class="mt-1 text-sm text-red-600"
            >
              Le prénom est requis
            </div>

            <label
              for="nom"
              class="block text-sm font-semibold text-gray-700 mb-2 mt-4"
            >
              Nom <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              name="nom"
              id="nom"
              [(ngModel)]="formData.lastName"
              required
              #nomInterimaire="ngModel"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Votre nom"
            />
            <div
              *ngIf="nomInterimaire.invalid && nomInterimaire.touched"
              class="mt-1 text-sm text-red-600"
            >
              Le nom est requis
            </div>

            <label
              for="adresse"
              class="block text-sm font-semibold text-gray-700 mb-2 mt-4"
            >
              Adresse
            </label>
            <input
              type="text"
              name="adresse"
              id="adresse"
              [(ngModel)]="formData.adresse"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Votre adresse"
            />
          </div>

          <!-- Informations communes -->
          <div class="space-y-4">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Email <span class="text-red-500">*</span>
            </label>
            <input
              type="email"
              name="email"
              id="email"
              [(ngModel)]="formData.email"
              required
              #email="ngModel"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Votre email"
            />
            <div
              *ngIf="email.invalid && email.touched"
              class="mt-1 text-sm text-red-600"
            >
              <span *ngIf="email.errors?.['required']">L'email est requis</span>
              <span *ngIf="email.errors?.['email']"
                >Format d'email invalide</span
              >
            </div>

            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Numéro de téléphone
            </label>
            <div class="flex">
              <select
                name="countryCode"
                id="countryCode"
                [(ngModel)]="formData.countryCode"
                class="mr-2 px-2 py-2 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              >
                <option value="+33">+33</option>
                <option value="+1">+1</option>
                <option value="+44">+44</option>
                <option value="+49">+49</option>
              </select>
              <input
                type="tel"
                name="phoneNumber"
                id="phoneNumber"
                [(ngModel)]="formData.phoneNumber"
                class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
                placeholder="Votre numéro de téléphone"
              />
            </div>

            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Mot de passe <span class="text-red-500">*</span>
            </label>
            <input
              type="password"
              name="password"
              id="password"
              [(ngModel)]="formData.password"
              required
              #password="ngModel"
              minlength="6"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Votre mot de passe"
            />
            <div
              *ngIf="password.invalid && password.touched"
              class="mt-1 text-sm text-red-600"
            >
              <span *ngIf="password.errors?.['required']"
                >Le mot de passe est requis</span
              >
              <span *ngIf="password.errors?.['minlength']"
                >Le mot de passe doit contenir au moins 6 caractères</span
              >
            </div>

            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Confirmer le mot de passe <span class="text-red-500">*</span>
            </label>
            <input
              type="password"
              name="confirmPassword"
              id="confirmPassword"
              [(ngModel)]="formData.confirmPassword"
              required
              #confirmPassword="ngModel"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors duration-200"
              placeholder="Confirmez votre mot de passe"
            />
            <div
              *ngIf="confirmPassword.invalid && confirmPassword.touched"
              class="mt-1 text-sm text-red-600"
            >
              La confirmation du mot de passe est requise
            </div>
            <div
              *ngIf="
                formData.password &&
                formData.confirmPassword &&
                formData.password !== formData.confirmPassword
              "
              class="mt-1 text-sm text-red-600"
            >
              Les mots de passe ne correspondent pas
            </div>
          </div>

          <!-- Conditions d'utilisation -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div class="flex items-start gap-3">
              <input
                type="checkbox"
                name="termsAccepted"
                id="termsAccepted"
                [(ngModel)]="formData.termsAccepted"
                required
                #termsAccepted="ngModel"
                class="mt-1 w-4 h-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-blue-500"
              />
              <label
                for="termsAccepted"
                class="text-sm text-gray-700 leading-relaxed"
              >
                J'accepte les
                <a
                  href="#"
                  class="text-blue-600 hover:text-blue-800 underline font-medium"
                >
                  conditions générales d'utilisation
                </a>
                et la
                <a
                  href="#"
                  class="text-blue-600 hover:text-blue-800 underline font-medium"
                >
                  politique de confidentialité
                </a>
                <span class="text-red-500">*</span>
              </label>
            </div>
            <div
              *ngIf="termsAccepted.invalid && termsAccepted.touched"
              class="mt-2 text-sm text-red-600"
            >
              Vous devez accepter les conditions d'utilisation
            </div>
          </div>

          <!-- Bouton de soumission -->
          <button
            type="submit"
            [disabled]="
              isLoading ||
              registrationForm.invalid ||
              formData.password !== formData.confirmPassword
            "
            class="w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-4 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none font-semibold text-lg shadow-lg"
          >
            <div class="flex items-center justify-center">
              <svg
                *ngIf="isLoading"
                class="animate-spin -ml-1 mr-3 h-5 w-5 text-white"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
              </svg>
              {{ isLoading ? "Inscription en cours..." : "Créer mon compte" }}
            </div>
          </button>
        </form>
      </div>
    </div>
  </main>
</div>
